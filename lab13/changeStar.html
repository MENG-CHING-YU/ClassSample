<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lab13</title>
    <style>
        body {
            font-size: 17px;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #fff;
        }

        header {
            background-color: black;
            color: lightgreen;
            /* 內距 */
            padding: 20px;
            /* 文字置中 */
            text-align: center;
        }

        .container {
            width: 90%;
            /* 外距 */
            margin: auto;
            padding: 10px;
        }
    </style>
</head>

<body>
    <header>
        <h1>星星評分</h1>
    </header>
    <div class="container">
        <img src="./imgs/star.gif" alt="" class="star">
        <img src="./imgs/star.gif" alt="" class="star">
        <img src="./imgs/star.gif" alt="" class="star">
        <img src="./imgs/star.gif" alt="" class="star">
        <img src="./imgs/star.gif" alt="" class="star">
        <br>
        <h3 id="starMsg">目前0顆星</h3>
        <button id="resetStar">重置星星</button>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script>
        $(function () {
            // javascript code
            /*
                1. 實作使用者滑鼠移入星星換色
                    換色邏輯移動該顆星星1~該顆星星換色
                    滑鼠移出星星換回白色色星星
                    移入移出時星星數量資訊顯示h3標籤
                2. 實作點擊星星功能讓使用者最後決定星星數量
                3. 實作重置星星功能
            */
            // 星星移入換色
            let index = 0;
            $('.star').mouseenter(function () {
                if (flag) {
                    // $('.star').attr('src', './imgs/chngstar.gif');
                    index = $(this).index();
                    console.log(index);
                    for (let i = 0; i <= index; i++) {
                        $('.star').eq(i).attr('src', './imgs/chngstar.gif');
                    }
                    $('#starMsg').text(`目前${index + 1}顆星`);
                }
            })
            // 星星移出換色
            $('.star').mouseleave(function () {
                if (flag) {
                    // $('.star').attr('src', './imgs/star.gif');
                    // $('#starMsg').text('目前0顆星');
                    resetStar();
                }
            })

            // 點擊星星功能
            let flag = true;
            $('.star').click(function () {
                if (flag) {
                    flag = false;
                    $('#starMsg').text(`最後選擇${index + 1}顆星`);
                }
            })

            // 重置星星
            function resetStar() {
                $('.star').attr('src', './imgs/star.gif');
                $('#starMsg').text('目前0顆星');
            }
            $('#resetStar').click(function () {
                resetStar();
                flag = true;
            })
        })
    </script>
</body>

</html>